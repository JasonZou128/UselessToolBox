<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>è®¾å¤‡ç»´ä¿®ç®¡ç†ç³»ç»Ÿ</title>
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #f7f7f7;
            padding-bottom: 60px;
            overflow-x: hidden;
        }
        
        /* å¤´éƒ¨å¯¼èˆª */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 44px;
            background: #1aad19;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 15px;
            font-size: 18px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 1px 6px rgba(0,0,0,0.1);
        }
        
        .header-title {
            flex: 1;
            text-align: center;
        }
        
        .role-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: normal;
        }
        
        /* ä¸»è¦å†…å®¹åŒºåŸŸ */
        .main-content {
            margin-top: 44px;
            min-height: calc(100vh - 104px);
            padding: 0;
        }
        
        /* é¡µé¢å®¹å™¨ */
        .page {
            display: none;
            min-height: 100%;
        }
        
        .page.active {
            display: block;
        }
        
        /* ç™»å½•é¡µé¢ */
        .login-page {
            padding: 60px 20px 20px;
            text-align: center;
        }
        
        .login-card {
            background: white;
            border-radius: 12px;
            padding: 40px 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin: 40px 0;
        }
        
        .login-title {
            font-size: 24px;
            color: #333;
            margin-bottom: 10px;
        }
        
        .login-desc {
            color: #666;
            margin-bottom: 30px;
        }
        
        .role-selector {
            display: grid;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .role-option {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .role-option:hover {
            border-color: #1aad19;
            background: #f0f9f0;
        }
        
        .role-option.selected {
            border-color: #1aad19;
            background: #e8f5e8;
        }
        
        .role-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }
        
        .role-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }
        
        .role-desc {
            font-size: 12px;
            color: #666;
        }
        
        .login-button {
            width: 100%;
            padding: 14px;
            background: #1aad19;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .login-button:active {
            background: #179b16;
        }
        
        .login-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        /* é€šç”¨æ ·å¼ */
        .content-page {
            padding: 20px 15px;
        }
        
        .welcome-card {
            background: linear-gradient(135deg, #1aad19, #26c91a);
            border-radius: 12px;
            padding: 20px;
            color: white;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(26, 173, 25, 0.3);
        }
        
        .welcome-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .welcome-desc {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .action-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            transition: transform 0.2s ease;
            cursor: pointer;
        }
        
        .action-card:active {
            transform: scale(0.95);
        }
        
        .action-icon {
            font-size: 32px;
            margin-bottom: 8px;
            display: block;
        }
        
        .action-title {
            font-size: 14px;
            color: #333;
            font-weight: 500;
        }
        
        .stats-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .stats-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #1aad19;
            display: block;
        }
        
        .stat-label {
            font-size: 12px;
            color: #666;
            margin-top: 4px;
        }
        
        /* è¡¨å•æ ·å¼ */
        .form-container {
            padding: 20px 15px;
        }
        
        .form-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .form-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            color: #333;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            font-size: 16px;
            background: #fafafa;
            transition: border-color 0.2s ease;
        }
        
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #1aad19;
            background: white;
        }
        
        .form-textarea {
            height: 80px;
            resize: vertical;
        }
        
        .form-button {
            width: 100%;
            padding: 14px;
            background: #1aad19;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .form-button:active {
            background: #179b16;
        }
        
        /* åˆ—è¡¨æ ·å¼ */
        .list-container {
            padding: 15px;
        }
        
        .list-item {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .list-title {
            font-size: 16px;
            font-weight: 500;
            color: #333;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        
        .status-processing {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .status-completed {
            background: #d4edda;
            color: #155724;
        }
        
        .list-content {
            font-size: 14px;
            color: #666;
            line-height: 1.4;
        }
        
        .list-time {
            font-size: 12px;
            color: #999;
            margin-top: 8px;
        }
        
        /* åº•éƒ¨TabBar */
        .tabbar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: white;
            border-top: 1px solid #e5e5e5;
            display: flex;
            z-index: 1000;
        }
        
        .tab-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 8px;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .tab-icon {
            font-size: 20px;
            margin-bottom: 4px;
            color: #999;
        }
        
        .tab-text {
            font-size: 11px;
            color: #999;
        }
        
        .tab-item.active .tab-icon,
        .tab-item.active .tab-text {
            color: #1aad19;
        }
        
        /* éšè—ç±» */
        .hidden {
            display: none !important;
        }
        
        /* æ–°å¢æ ·å¼ */
        .action-btn {
            padding: 6px 12px;
            background: #1aad19;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            margin-right: 8px;
            margin-bottom: 4px;
        }
        
        .action-btn:last-child {
            margin-right: 0;
        }
        
        .action-btn.urgent {
            background: #dc3545;
        }
        
        .action-btn.approve {
            background: #28a745;
        }
        
        .action-btn.reject {
            background: #dc3545;
        }
        
        .action-btn.disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .filter-tabs {
            display: flex;
            margin-bottom: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .filter-tab {
            flex: 1;
            padding: 12px;
            background: white;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-tab.active {
            background: #1aad19;
            color: white;
        }
        
        .task-actions,
        .audit-actions {
            margin-top: 12px;
            display: flex;
            flex-wrap: wrap;
        }
        
        .search-bar {
            margin-bottom: 15px;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            font-size: 16px;
            background: white;
        }
        
        .user-info {
            flex: 1;
        }
        
        .user-name {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }
        
        .user-details {
            font-size: 12px;
            color: #666;
            margin-bottom: 4px;
        }
        
        .user-role {
            font-size: 12px;
            color: #1aad19;
        }
        
        .user-actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .user-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .system-status {
            display: grid;
            gap: 12px;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-label {
            font-size: 14px;
            color: #666;
        }
        
        .status-value {
            font-size: 14px;
            font-weight: 500;
        }
        
        .status-value.online {
            color: #28a745;
        }
        
        .status-value.warning {
            color: #ffc107;
        }
        
        .skill-list {
            display: grid;
            gap: 15px;
        }
        
        .skill-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .skill-name {
            min-width: 80px;
            font-size: 14px;
            color: #333;
        }
        
        .skill-bar {
            flex: 1;
            height: 8px;
            background: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .skill-progress {
            height: 100%;
            background: #1aad19;
            transition: width 0.3s ease;
        }
        
        .skill-level {
            min-width: 40px;
            font-size: 12px;
            color: #666;
            text-align: right;
        }
        
        /* æƒé™ç”³è¯·é¡µé¢ */
        .permission-page {
            padding: 20px 15px;
        }
    </style>
</head>
<body>
    <!-- å¤´éƒ¨å¯¼èˆª -->
    <div class="header">
        <div class="header-title" id="headerTitle">è®¾å¤‡ç»´ä¿®ç®¡ç†ç³»ç»Ÿ</div>
        <div class="role-badge" id="roleBadge">æœªç™»å½•</div>
    </div>
    
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <div class="main-content">
        <!-- ç™»å½•é€‰æ‹©é¡µé¢ -->
        <div id="loginPage" class="page active login-page">
            <div class="login-card">
                <div class="login-title">ğŸ” èº«ä»½éªŒè¯</div>
                <div class="login-desc">è¯·é€‰æ‹©æ‚¨çš„èº«ä»½è§’è‰²è¿›å…¥ç³»ç»Ÿ</div>
                
                <div class="role-selector">
                    <div class="role-option" onclick="selectRole('user')">
                        <div class="role-icon">ğŸ‘¤</div>
                        <div class="role-name">æ™®é€šç”¨æˆ·</div>
                        <div class="role-desc">è®¾å¤‡æ“ä½œå‘˜ï¼Œå¯ä»¥æŠ¥ä¿®å’ŒæŸ¥çœ‹</div>
                    </div>
                    
                    <div class="role-option" onclick="selectRole('maintainer')">
                        <div class="role-icon">ğŸ”§</div>
                        <div class="role-name">ç»´ä¿®äººå‘˜</div>
                        <div class="role-desc">è®¾å¤‡ç»´ä¿®å‘˜ï¼Œå¤„ç†ç»´ä¿®ä»»åŠ¡</div>
                    </div>
                    
                    <div class="role-option" onclick="selectRole('admin')">
                        <div class="role-icon">ğŸ‘‘</div>
                        <div class="role-name">ç®¡ç†å‘˜</div>
                        <div class="role-desc">ç³»ç»Ÿç®¡ç†å‘˜ï¼Œå®Œæ•´æƒé™</div>
                    </div>
                </div>
                
                <button class="login-button" id="loginButton" onclick="login()" disabled>
                    è¿›å…¥ç³»ç»Ÿ
                </button>
            </div>
        </div>
        
        <!-- æ™®é€šç”¨æˆ·é¦–é¡µ -->
        <div id="userHomePage" class="page content-page">
            <div class="welcome-card">
                <div class="welcome-title">ğŸ‘¤ æ™®é€šç”¨æˆ·å·¥ä½œå°</div>
                <div class="welcome-desc">è®¾å¤‡æ“ä½œå‘˜ä¸“ç”¨åŠŸèƒ½</div>
            </div>
            
            <div class="quick-actions">
                <div class="action-card" onclick="switchTab('userRepair')">
                    <span class="action-icon">ğŸ”§</span>
                    <span class="action-title">æ•…éšœæŠ¥ä¿®</span>
                </div>
                <div class="action-card" onclick="switchTab('userTrack')">
                    <span class="action-icon">ğŸ“‹</span>
                    <span class="action-title">æˆ‘çš„æŠ¥ä¿®</span>
                </div>
                <div class="action-card" onclick="switchTab('userInspection')">
                    <span class="action-icon">âœ…</span>
                    <span class="action-title">è®¾å¤‡ç‚¹æ£€</span>
                </div>
                <div class="action-card" onclick="switchTab('userProfile')">
                    <span class="action-icon">âš™ï¸</span>
                    <span class="action-title">ä¸ªäººä¸­å¿ƒ</span>
                </div>
            </div>
            
            <div class="stats-section">
                <div class="stats-title">ğŸ“Š æˆ‘çš„ç»Ÿè®¡</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number">3</span>
                        <span class="stat-label">è¿›è¡Œä¸­</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">15</span>
                        <span class="stat-label">å·²å®Œæˆ</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">2</span>
                        <span class="stat-label">å¾…å¤„ç†</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ç»´ä¿®äººå‘˜é¦–é¡µ -->
        <div id="maintainerHomePage" class="page content-page">
            <div class="welcome-card">
                <div class="welcome-title">ğŸ”§ ç»´ä¿®äººå‘˜å·¥ä½œå°</div>
                <div class="welcome-desc">è®¾å¤‡ç»´ä¿®ä¸“ä¸šåŠŸèƒ½</div>
            </div>
            
            <div class="quick-actions">
                <div class="action-card" onclick="switchTab('maintainerWork')">
                    <span class="action-icon">ğŸ› ï¸</span>
                    <span class="action-title">å·¥ä½œå°</span>
                </div>
                <div class="action-card" onclick="switchTab('maintainerTasks')">
                    <span class="action-icon">ğŸ“‹</span>
                    <span class="action-title">ç»´ä¿®ä»»åŠ¡</span>
                </div>
                <div class="action-card" onclick="switchTab('maintainerMaintenance')">
                    <span class="action-icon">âš™ï¸</span>
                    <span class="action-title">ä¿å…»ç®¡ç†</span>
                </div>
                <div class="action-card" onclick="switchTab('maintainerStats')">
                    <span class="action-icon">ğŸ“Š</span>
                    <span class="action-title">å·¥ä½œç»Ÿè®¡</span>
                </div>
            </div>
            
            <div class="stats-section">
                <div class="stats-title">ğŸ“Š å·¥ä½œç»Ÿè®¡</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number">8</span>
                        <span class="stat-label">å¾…å¤„ç†</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">5</span>
                        <span class="stat-label">è¿›è¡Œä¸­</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">42</span>
                        <span class="stat-label">å·²å®Œæˆ</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ç®¡ç†å‘˜é¦–é¡µ -->
        <div id="adminHomePage" class="page content-page">
            <div class="welcome-card">
                <div class="welcome-title">ğŸ‘‘ ç®¡ç†å‘˜æ§åˆ¶å°</div>
                <div class="welcome-desc">ç³»ç»Ÿç®¡ç†å’Œæ•°æ®åˆ†æ</div>
            </div>
            
            <div class="quick-actions">
                <div class="action-card" onclick="switchTab('adminSystem')">
                    <span class="action-icon">âš™ï¸</span>
                    <span class="action-title">ç³»ç»Ÿç®¡ç†</span>
                </div>
                <div class="action-card" onclick="switchTab('adminData')">
                    <span class="action-icon">ğŸ“Š</span>
                    <span class="action-title">æ•°æ®ä¸­å¿ƒ</span>
                </div>
                <div class="action-card" onclick="switchTab('adminUsers')">
                    <span class="action-icon">ğŸ‘¥</span>
                    <span class="action-title">ç”¨æˆ·ç®¡ç†</span>
                </div>
                <div class="action-card" onclick="switchTab('adminAudit')">
                    <span class="action-icon">âœ…</span>
                    <span class="action-title">æƒé™å®¡æ ¸</span>
                </div>
            </div>
            
            <div class="stats-section">
                <div class="stats-title">ğŸ“Š ç³»ç»Ÿæ¦‚å†µ</div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-number">156</span>
                        <span class="stat-label">æ€»ç”¨æˆ·</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">23</span>
                        <span class="stat-label">æ´»è·ƒè®¾å¤‡</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">98%</span>
                        <span class="stat-label">ç³»ç»Ÿå¯ç”¨æ€§</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æƒé™ç”³è¯·é¡µé¢ -->
        <div id="permissionPage" class="page permission-page">
            <div class="form-card">
                <div class="form-title">ğŸ“ æƒé™ç”³è¯·</div>
                
                <div class="form-group">
                    <label class="form-label">ç”³è¯·è§’è‰²</label>
                    <select class="form-select" id="targetRole" required>
                        <option value="">è¯·é€‰æ‹©ç›®æ ‡è§’è‰²</option>
                        <option value="maintainer">ç»´ä¿®äººå‘˜</option>
                        <option value="admin">ç®¡ç†å‘˜</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ç”³è¯·åŸå› </label>
                    <textarea class="form-textarea" id="applyReason" placeholder="è¯·è¯¦ç»†è¯´æ˜ç”³è¯·åŸå› å’Œå·¥ä½œéœ€è¦..." required></textarea>
                </div>
                
                <button class="form-button" onclick="submitPermissionApplication()">
                    æäº¤ç”³è¯·
                </button>
            </div>
        </div>
        
        <!-- åŠ¨æ€é¡µé¢å®¹å™¨ -->
        <div id="userRepairPage" class="page"></div>
        <div id="userTrackPage" class="page"></div>
        <div id="userInspectionPage" class="page"></div>
        <div id="userProfilePage" class="page"></div>
        <div id="maintainerWorkPage" class="page"></div>
        <div id="maintainerTasksPage" class="page"></div>
        <div id="maintainerMaintenancePage" class="page"></div>
        <div id="maintainerStatsPage" class="page"></div>
        <div id="adminSystemPage" class="page"></div>
        <div id="adminDataPage" class="page"></div>
        <div id="adminUsersPage" class="page"></div>
        <div id="adminAuditPage" class="page"></div>
    </div>
    
    <!-- åº•éƒ¨TabBar -->
    <div class="tabbar" id="tabbar" style="display: none;">
        <!-- æ™®é€šç”¨æˆ·TabBar -->
        <div id="userTabbar" class="hidden">
            <div class="tab-item active" onclick="switchTab('userHome')">
                <span class="tab-icon">ğŸ </span>
                <span class="tab-text">é¦–é¡µ</span>
            </div>
            <div class="tab-item" onclick="switchTab('userRepair')">
                <span class="tab-icon">ğŸ”§</span>
                <span class="tab-text">æŠ¥ä¿®</span>
            </div>
            <div class="tab-item" onclick="switchTab('userTrack')">
                <span class="tab-icon">ğŸ“‹</span>
                <span class="tab-text">æˆ‘çš„æŠ¥ä¿®</span>
            </div>
            <div class="tab-item" onclick="switchTab('permission')">
                <span class="tab-icon">â¬†ï¸</span>
                <span class="tab-text">ç”³è¯·æƒé™</span>
            </div>
        </div>
        
        <!-- ç»´ä¿®äººå‘˜TabBar -->
        <div id="maintainerTabbar" class="hidden">
            <div class="tab-item active" onclick="switchTab('maintainerHome')">
                <span class="tab-icon">ğŸ </span>
                <span class="tab-text">é¦–é¡µ</span>
            </div>
            <div class="tab-item" onclick="switchTab('maintainerWork')">
                <span class="tab-icon">ğŸ› ï¸</span>
                <span class="tab-text">å·¥ä½œå°</span>
            </div>
            <div class="tab-item" onclick="switchTab('maintainerTasks')">
                <span class="tab-icon">ğŸ“‹</span>
                <span class="tab-text">ä»»åŠ¡</span>
            </div>
            <div class="tab-item" onclick="switchTab('maintainerStats')">
                <span class="tab-icon">ğŸ“Š</span>
                <span class="tab-text">ç»Ÿè®¡</span>
            </div>
        </div>
        
        <!-- ç®¡ç†å‘˜TabBar -->
        <div id="adminTabbar" class="hidden">
            <div class="tab-item active" onclick="switchTab('adminHome')">
                <span class="tab-icon">ğŸ </span>
                <span class="tab-text">é¦–é¡µ</span>
            </div>
            <div class="tab-item" onclick="switchTab('adminSystem')">
                <span class="tab-icon">âš™ï¸</span>
                <span class="tab-text">ç³»ç»Ÿ</span>
            </div>
            <div class="tab-item" onclick="switchTab('adminData')">
                <span class="tab-icon">ğŸ“Š</span>
                <span class="tab-text">æ•°æ®</span>
            </div>
            <div class="tab-item" onclick="switchTab('adminAudit')">
                <span class="tab-icon">âœ…</span>
                <span class="tab-text">å®¡æ ¸</span>
            </div>
        </div>
    </div>

    <!-- å¼•å…¥é¡µé¢å†…å®¹ç®¡ç† -->
    <script src="pages.js"></script>
    <script>
        // å…¨å±€å˜é‡
        let currentUser = {
            role: null,
            name: '',
            permissions: []
        };
        
        let selectedRole = null;
        
        // è§’è‰²é…ç½®
        const roleConfig = {
            user: {
                name: 'æ™®é€šç”¨æˆ·',
                badge: 'æ“ä½œå‘˜',
                permissions: ['repair', 'view_own', 'inspection']
            },
            maintainer: {
                name: 'ç»´ä¿®äººå‘˜',
                badge: 'ç»´ä¿®å‘˜',
                permissions: ['repair', 'view_assigned', 'maintenance', 'inspection', 'update_status']
            },
            admin: {
                name: 'ç®¡ç†å‘˜',
                badge: 'ç®¡ç†å‘˜',
                permissions: ['all']
            }
        };
        
        // é€‰æ‹©è§’è‰²
        function selectRole(role) {
            // ç§»é™¤ä¹‹å‰çš„é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.role-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // æ·»åŠ å½“å‰é€‰ä¸­çŠ¶æ€
            event.currentTarget.classList.add('selected');
            
            selectedRole = role;
            document.getElementById('loginButton').disabled = false;
        }
        
        // ç™»å½•
        function login() {
            if (!selectedRole) {
                alert('è¯·å…ˆé€‰æ‹©è§’è‰²');
                return;
            }
            
            currentUser.role = selectedRole;
            currentUser.name = roleConfig[selectedRole].name;
            currentUser.permissions = roleConfig[selectedRole].permissions;
            
            // æ›´æ–°ç•Œé¢
            updateUI();
            
            // éšè—ç™»å½•é¡µé¢ï¼Œæ˜¾ç¤ºå¯¹åº”é¦–é¡µ
            document.getElementById('loginPage').classList.remove('active');
            document.getElementById(selectedRole + 'HomePage').classList.add('active');
            
            // æ˜¾ç¤ºTabBar
            document.getElementById('tabbar').style.display = 'flex';
            document.getElementById(selectedRole + 'Tabbar').classList.remove('hidden');
            
            // æ›´æ–°å¤´éƒ¨ä¿¡æ¯
            document.getElementById('roleBadge').textContent = roleConfig[selectedRole].badge;
            
            console.log('ç”¨æˆ·ç™»å½•æˆåŠŸ:', currentUser);
        }
        
        // æ›´æ–°ç•Œé¢
        function updateUI() {
            // æ ¹æ®è§’è‰²æƒé™æ˜¾ç¤º/éšè—åŠŸèƒ½
            // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´å¤šçš„æƒé™æ§åˆ¶é€»è¾‘
        }
        
        // åˆ‡æ¢Tab
        function switchTab(tabName) {
            // éšè—æ‰€æœ‰é¡µé¢
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // ç§»é™¤æ‰€æœ‰tabçš„activeçŠ¶æ€
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // åŠ¨æ€åŠ è½½é¡µé¢å†…å®¹
            if (window.pageContents && window.pageContents[tabName]) {
                loadPageContent(tabName, window.pageContents[tabName]);
            }
            
            // æ˜¾ç¤ºå¯¹åº”é¡µé¢
            const targetPage = document.getElementById(tabName + 'Page');
            if (targetPage) {
                targetPage.classList.add('active');
            }
            
            // æ¿€æ´»å¯¹åº”tab
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('active');
            }
            
            // æ›´æ–°å¤´éƒ¨æ ‡é¢˜
            updateHeaderTitle(tabName);
        }
        
        // æ›´æ–°å¤´éƒ¨æ ‡é¢˜
        function updateHeaderTitle(tabName) {
            const titles = {
                'userHome': 'æ™®é€šç”¨æˆ·å·¥ä½œå°',
                'userRepair': 'æ•…éšœæŠ¥ä¿®',
                'userTrack': 'æˆ‘çš„æŠ¥ä¿®',
                'userInspection': 'è®¾å¤‡ç‚¹æ£€',
                'userProfile': 'ä¸ªäººä¸­å¿ƒ',
                'maintainerHome': 'ç»´ä¿®äººå‘˜å·¥ä½œå°',
                'maintainerWork': 'ç»´ä¿®å·¥ä½œå°',
                'maintainerTasks': 'ç»´ä¿®ä»»åŠ¡',
                'maintainerMaintenance': 'ä¿å…»ç®¡ç†',
                'maintainerStats': 'å·¥ä½œç»Ÿè®¡',
                'maintainerProfile': 'ä¸ªäººä¸­å¿ƒ',
                'adminHome': 'ç®¡ç†å‘˜æ§åˆ¶å°',
                'adminSystem': 'ç³»ç»Ÿç®¡ç†',
                'adminData': 'æ•°æ®ä¸­å¿ƒ',
                'adminUsers': 'ç”¨æˆ·ç®¡ç†',
                'adminAudit': 'æƒé™å®¡æ ¸',
                'permission': 'æƒé™ç”³è¯·'
            };
            
            document.getElementById('headerTitle').textContent = titles[tabName] || 'è®¾å¤‡ç»´ä¿®ç®¡ç†ç³»ç»Ÿ';
        }
        
        // æäº¤æƒé™ç”³è¯·
        function submitPermissionApplication() {
            const targetRole = document.getElementById('targetRole').value;
            const reason = document.getElementById('applyReason').value;
            
            if (!targetRole || !reason) {
                alert('è¯·å¡«å†™å®Œæ•´çš„ç”³è¯·ä¿¡æ¯');
                return;
            }
            
            // æ¨¡æ‹Ÿæäº¤ç”³è¯·
            alert('âœ… æƒé™ç”³è¯·æäº¤æˆåŠŸï¼\n\n' +
                  'ç”³è¯·è§’è‰²ï¼š' + (targetRole === 'maintainer' ? 'ç»´ä¿®äººå‘˜' : 'ç®¡ç†å‘˜') + '\n' +
                  'ç”³è¯·åŸå› ï¼š' + reason + '\n\n' +
                  'æ‚¨çš„ç”³è¯·å·²æäº¤ç»™ç®¡ç†å‘˜å®¡æ ¸ï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚');
            
            // æ¸…ç©ºè¡¨å•
            document.getElementById('targetRole').value = '';
            document.getElementById('applyReason').value = '';
            
            // è¿”å›é¦–é¡µ
            switchTab(currentUser.role + 'Home');
        }
        
        // é¡µé¢åŠ è½½å®Œæˆ
        console.log('åŸºäºè§’è‰²çš„è®¾å¤‡ç»´ä¿®ç®¡ç†ç³»ç»ŸåŠ è½½å®Œæˆ');
        console.log('å½“å‰ç‰ˆæœ¬ï¼šv3.0 - è§’è‰²æƒé™ç®¡ç†ç‰ˆ');
    </script>
</body>
</html> 