<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¾å¤‡ç»´ä¿®ç®¡ç†ç³»ç»Ÿ</title>
    <!-- å¼•å…¥å¾®ä¿¡ JS-SDK -->
    <script src="https://res.wx.qq.com/open/js/jweixin-1.6.0.js"></script>
    <!-- å¼•å…¥äº‘å¼€å‘ JS-SDK -->
    <script src="https://res.wx.qq.com/cloud/1.1.0/cloud.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: #1aad19;
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .menu {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }
        .menu-item:last-child {
            border-bottom: none;
        }
        .menu-item i {
            margin-right: 10px;
            color: #1aad19;
        }
        .status {
            background: #e7f3ff;
            padding: 10px;
            margin: 20px 0;
            border-radius: 5px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>è®¾å¤‡ç»´ä¿®ç®¡ç†ç³»ç»Ÿ</h1>
        </div>
        
        <div class="status" id="status">
            æ­£åœ¨åˆå§‹åŒ–äº‘å¼€å‘ç¯å¢ƒ...
        </div>
        
        <div class="menu">
            <div class="menu-item" onclick="handleRepair()">
                <i>ğŸ“</i>
                <span>æ•…éšœæŠ¥ä¿®</span>
            </div>
            <div class="menu-item" onclick="handleTrack()">
                <i>ğŸ”</i>
                <span>ç»´ä¿®è·Ÿè¸ª</span>
            </div>
            <div class="menu-item" onclick="handleInspection()">
                <i>âœ…</i>
                <span>è®¾å¤‡ç‚¹æ£€</span>
            </div>
            <div class="menu-item" onclick="handleMaintenance()">
                <i>âš™ï¸</i>
                <span>ä¿å…»ç®¡ç†</span>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–äº‘å¼€å‘
        try {
            wx.cloud.init({
                env: 'prod-8g0iq9bwb972a467' // æ‚¨çš„äº‘å¼€å‘ç¯å¢ƒID
            });
            document.getElementById('status').innerHTML = 'âœ… äº‘å¼€å‘ç¯å¢ƒåˆå§‹åŒ–æˆåŠŸï¼';
            document.getElementById('status').style.backgroundColor = '#e7f7e7';
        } catch (error) {
            console.error('äº‘å¼€å‘åˆå§‹åŒ–å¤±è´¥ï¼š', error);
            document.getElementById('status').innerHTML = 'âŒ äº‘å¼€å‘ç¯å¢ƒåˆå§‹åŒ–å¤±è´¥ï¼Œè¯·æ£€æŸ¥é…ç½®';
            document.getElementById('status').style.backgroundColor = '#ffe7e7';
        }

        // é¡µé¢åŠ è½½å®Œæˆ
        console.log('é¡µé¢åŠ è½½å®Œæˆ');
        console.log('å½“å‰è®¿é—®åœ°å€ï¼š', window.location.href);

        // å¤„ç†æ•…éšœæŠ¥ä¿®
        async function handleRepair() {
            try {
                alert('æ•…éšœæŠ¥ä¿®åŠŸèƒ½\n\nè¿™é‡Œå°†æ¥å¯ä»¥ï¼š\n- é€‰æ‹©è®¾å¤‡ç±»å‹\n- å¡«å†™æ•…éšœæè¿°\n- ä¸Šä¼ æ•…éšœå›¾ç‰‡\n- æäº¤æŠ¥ä¿®å•');
                
                // ç¤ºä¾‹ï¼šè°ƒç”¨äº‘å‡½æ•°
                /*
                const result = await wx.cloud.callFunction({
                    name: 'createRepairOrder',
                    data: {
                        type: 'repair',
                        timestamp: Date.now()
                    }
                });
                console.log('åˆ›å»ºæŠ¥ä¿®å•æˆåŠŸï¼š', result);
                */
            } catch (error) {
                console.error('åˆ›å»ºæŠ¥ä¿®å•å¤±è´¥ï¼š', error);
                alert('åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•');
            }
        }

        // å¤„ç†ç»´ä¿®è·Ÿè¸ª
        async function handleTrack() {
            try {
                alert('ç»´ä¿®è·Ÿè¸ªåŠŸèƒ½\n\nè¿™é‡Œå°†æ¥å¯ä»¥ï¼š\n- æŸ¥çœ‹æŠ¥ä¿®å•çŠ¶æ€\n- è·Ÿè¸ªç»´ä¿®è¿›åº¦\n- æŸ¥çœ‹ç»´ä¿®å†å²');
                
                // ç¤ºä¾‹ï¼šä»äº‘æ•°æ®åº“è·å–ç»´ä¿®è®°å½•
                /*
                const db = wx.cloud.database();
                const records = await db.collection('repair_records').get();
                console.log('è·å–ç»´ä¿®è®°å½•ï¼š', records);
                */
            } catch (error) {
                console.error('è·å–ç»´ä¿®è®°å½•å¤±è´¥ï¼š', error);
                alert('åŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨ï¼Œè¯·ç¨åå†è¯•');
            }
        }

        // å¤„ç†è®¾å¤‡ç‚¹æ£€
        function handleInspection() {
            alert('è®¾å¤‡ç‚¹æ£€åŠŸèƒ½\n\nè¿™é‡Œå°†æ¥å¯ä»¥ï¼š\n- æ‰«æè®¾å¤‡äºŒç»´ç \n- å¡«å†™ç‚¹æ£€è¡¨å•\n- è®°å½•è®¾å¤‡çŠ¶æ€\n- ä¸Šä¼ ç‚¹æ£€ç…§ç‰‡');
            console.log('è®¾å¤‡ç‚¹æ£€åŠŸèƒ½å¾…å®ç°');
        }

        // å¤„ç†ä¿å…»ç®¡ç†
        function handleMaintenance() {
            alert('ä¿å…»ç®¡ç†åŠŸèƒ½\n\nè¿™é‡Œå°†æ¥å¯ä»¥ï¼š\n- æŸ¥çœ‹ä¿å…»è®¡åˆ’\n- è®°å½•ä¿å…»å†…å®¹\n- è®¾ç½®ä¿å…»æé†’\n- ç”Ÿæˆä¿å…»æŠ¥å‘Š');
            console.log('ä¿å…»ç®¡ç†åŠŸèƒ½å¾…å®ç°');
        }

        // å¾®ä¿¡JS-SDKé…ç½®ï¼ˆéœ€è¦åœ¨å…¬ä¼—å·ä¸­ä½¿ç”¨ï¼‰
        wx.config({
            debug: true, // å¼€å¯è°ƒè¯•æ¨¡å¼
            appId: '', // å¿…å¡«ï¼Œå…¬ä¼—å·çš„å”¯ä¸€æ ‡è¯†
            timestamp: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„æ—¶é—´æˆ³
            nonceStr: '', // å¿…å¡«ï¼Œç”Ÿæˆç­¾åçš„éšæœºä¸²
            signature: '',// å¿…å¡«ï¼Œç­¾å
            jsApiList: ['chooseImage', 'previewImage'] // éœ€è¦ä½¿ç”¨çš„JSæ¥å£åˆ—è¡¨
        });

        wx.ready(function(){
            console.log('å¾®ä¿¡JS-SDKå‡†å¤‡å°±ç»ª');
        });

        wx.error(function(res){
            console.error('å¾®ä¿¡JS-SDKé…ç½®å¤±è´¥', res);
        });
    </script>
</body>
</html> 